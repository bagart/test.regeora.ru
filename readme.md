# Задание

В аттаче входной пример xml файла, который будет подаваться на вход скрипта
 (это внешний для нашей системы файл - его подкладывают контрагенты).

Описание:
- graph - выход автобуса из парка, есть номер (num) и смена (smena).
- event - рейс в выходе автобуса. если ev_id = 4, то это означает что рейс
   производственный и внутри записи нужно разбирать записи <stop>
- stop - остановка в производственном рейсе

Задачи:
0. Ознакомиться с задачей и прислать предполагаемую трудоёмкость на реализацию.
1. Распарсить xml в классы для работы с данными. Каждый “выход” должен быть
    отдельным объектом, содержащий в себе массив смен. То есть объединять
    <graph> с одинаковым num, смены должны быть в порядке возрастания их номера.
2. Реализовать метод у класса “выхода“, возвращающий количество производственных
    рейсов, общее время производственных рейсов (сумма всех end-start).
3. Реализовать метод у класса “выхода“, принимающий на вход “время с” и “время по“,
    возвращающий все остановки всех производственных рейсов “выхода“, попадающих
    в этот временной диапазон. Результат должен быть в таком виде, чтобы у каждой
    записи можно было определить номер смены и порядковый номер рейса в смене
    (добавление ли это данных в объект или какая-то отдельная возвращаемая
    структура - решайте сами).
4. Реализовать таблицу в БД StopPoints с id (внутренний идентификатор), external_id
    (внешний идентификатор), name (наименование). Сделать чтобы метод из пункта 3
    возвращал так же названия остановок по их external_id.

Вместе с результатом необходима оценка фактических трудозатрат на реализацию
    (желательно детально по каждому шагу).



# Решение
0. Сильно зависит от требований от 30 минут до 10часов и выше, 
    в зависимости от требований гибкости, оптимизации и покрытия тестами
1. 

    Graph::first()->smeny()->get()->toArray();
2. 
    $graph->getIndustrialEventCount();
    $graph->getIndustrialTimeCount();
    
    ### example
    `./artisan industrial_events:stat`
     `./artisan industrial_events:stat 1`
3. 
    Класс "выход" не должен иметь таких методов
    Stop::getIndustrialStopsBetween($start_minute, $from_minute)
    ### example
    `./artisan industrial_events:stops 8:00 20:00`
4.
     name - нет такого поля. 
     Stop::getIndustrialStopsBetween($start_minute, $from_minute)->first()->name


# Install

## Required PHP 7.1

```bash
composer install
./artisan migrate
./artisan import:raspvariant storage/app/test-import/raspvariant.xml
```
